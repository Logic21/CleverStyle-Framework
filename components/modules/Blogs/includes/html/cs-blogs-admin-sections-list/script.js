// Generated by LiveScript 1.4.0
/**
 * @package   Blogs
 * @category  modules
 * @author    Nazar Mokrynskyi <nazar@mokrynskyi.com>
 * @copyright Copyright (c) 2016, Nazar Mokrynskyi
 * @license   MIT License, see license.txt
 */
(function(){
  Polymer({
    'is': 'cs-blogs-admin-sections-list',
    behaviors: [cs.Polymer.behaviors.Language('blogs_')],
    properties: {
      sections: Array
    },
    ready: function(){
      this._reload_sections();
    },
    _reload_sections: function(){
      var this$ = this;
      $.ajax({
        url: 'api/Blogs/admin/sections',
        type: 'get',
        success: function(sections){
          this$.set('sections', this$._prepare_sections(sections));
        }
      });
    },
    _prepare_sections: function(sections){
      var sections_normalized, sections_parents, i$, len$, section;
      sections_normalized = {};
      sections_parents = [];
      for (i$ = 0, len$ = sections.length; i$ < len$; ++i$) {
        section = sections[i$];
        sections_normalized[section.id] = section;
        sections_parents.push(section.parent);
      }
      for (i$ = 0, len$ = sections.length; i$ < len$; ++i$) {
        section = sections[i$];
        if (section.parent > 0) {
          section.title = sections_normalized[section.parent].title + ' :: ' + section.title;
        }
      }
      return sections.sort(function(a, b){
        return a.title > b.title;
      });
    }
  });
}).call(this);
