// Generated by CoffeeScript 1.4.0

/**
 * @package        Content
 * @category       modules
 * @author         Nazar Mokrynskyi <nazar@mokrynskyi.com>
 * @copyright      Copyright (c) 2014, Nazar Mokrynskyi
 * @license        MIT License, see license.txt
*/


(function() {

  $(document).on('click', '.cs-content-add', function() {
    var L, content, key, modal_body, title, type;
    L = cs.Language;
    modal_body = $("<div><div class=\"uk-form\">\n	<p>\n		<label>" + L.content_key + ":</label>\n		<input type=\"text\" name=\"key\">\n	</p>\n	<p>\n		<label>" + L.content_title + ":</label>\n		<input type=\"text\" name=\"title\">\n	</p>\n	<p>\n		<label>" + L.content_content + ":</label>\n		<textarea name=\"content\"></textarea>\n	</p>\n	<p>\n		<label>" + L.content_type + ":</label>\n		<select name=\"type\">\n			<option value=\"text\">text</option>\n			<option value=\"html\">html</option>\n		</select>\n	</p>\n	<p class=\"cs-right\">\n		<button class=\"uk-button\">Save</button>\n	</p>\n</div></div>");
    key = modal_body.find('[name=key]');
    title = modal_body.find('[name=title]');
    content = modal_body.find('[name=content]');
    type = modal_body.find('[name=type]');
    modal_body.appendTo('body').cs().modal('show').on('uk.modal.hide', function() {
      return $(this).remove();
    });
    return modal_body.find('button').click(function() {
      return $.ajax({
        url: 'api/Content',
        data: {
          key: key.val(),
          title: title.val(),
          content: content.val(),
          type: type.val()
        },
        type: 'post',
        success: function() {
          return location.reload();
        }
      });
    });
  }).on('click', '.cs-content-edit', function() {
    var L, key;
    L = cs.Language;
    key = $(this).val();
    return $.ajax({
      url: 'api/Content',
      data: {
        key: key
      },
      type: 'get',
      success: function(data) {
        var content, modal_body, title, type;
        modal_body = $("<div><div class=\"uk-form\">\n	<p>" + L.content_key + ": " + data.key + "</p>\n	<p>\n		<label>" + L.content_title + ":</label>\n		<input type=\"text\" name=\"title\">\n	</p>\n	<p>\n		<label>" + L.content_content + ":</label>\n		<textarea name=\"content\"></textarea>\n	</p>\n	<p>\n		<label>" + L.content_type + ":</label>\n		<select name=\"type\">\n			<option value=\"text\">text</option>\n			<option value=\"html\">html</option>\n		</select>\n	</p>\n	<p class=\"cs-right\">\n		<button class=\"uk-button\">Save</button>\n	</p>\n</div></div>");
        title = modal_body.find('[name=title]').val(data.title);
        content = modal_body.find('[name=content]').val(data.content);
        type = modal_body.find('[name=type]').val(data.type);
        modal_body.appendTo('body').cs().modal('show').on('uk.modal.hide', function() {
          return $(this).remove();
        });
        return modal_body.find('button').click(function() {
          return $.ajax({
            url: 'api/Content',
            data: {
              key: key,
              title: title.val(),
              content: content.val(),
              type: type.val()
            },
            type: 'put',
            success: function() {
              return location.reload();
            }
          });
        });
      }
    });
  }).on('click', '.cs-content-delete', function() {
    var L, key;
    L = cs.Language;
    if (!confirm("" + L.content_delete + "?")) {
      return;
    }
    key = $(this).val();
    return $.ajax({
      url: 'api/Content',
      data: {
        key: key
      },
      type: 'delete',
      success: function() {
        return location.reload();
      }
    });
  });

}).call(this);
