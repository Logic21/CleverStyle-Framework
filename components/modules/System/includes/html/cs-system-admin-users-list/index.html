<dom-module id="cs-system-admin-users-list">
  <template>
    <style include="advanced-styles"></style>
    <nav is="cs-nav-tabs">
      <button is="cs-button">[[L.search]]</button>
      <button is="cs-button">[[L.show_columns]]</button>
    </nav>
    <section is="cs-section-switcher">
      <div>
        <select compact is="cs-select" value="[[search_column]]">
          <option selected value="">[[L.all_columns]]</option>
          <template as="column" is="dom-repeat" items="[[all_columns]]">
            <option value="[[column]]">[[column]]</option>
          </template>
        </select>
        <span>[[L.search_mode]]</span>
        <select compact is="cs-select" value="{{search_mode}}">
          <template as="mode" is="dom-repeat" items="[[search_modes]]">
            <option selected$="[[equal(mode, search_mode)]]" value="[[mode]]">[[mode]]</option>
          </template>
        </select>
        <input is="cs-input-text" placeholder="[[L.search_text]]" type="text" value="{{search_text}}">
        <span>[[L.items]]</span>
        <input compact is="cs-input-text" min="1" step="1" type="number" value="{{search_limit}}">
      </div>
      <div>
        <template as="column" is="dom-repeat" items="[[search_columns]]">
          <button is="cs-button" on-click="toggle_search_column" primary="[[column.selected]]">[[column.name]]</button>
        </template>
      </div>
    </section>
    <hr>
    <div class="cs-margin cs-text-center" hidden$="[[!show_pagination]]">
      <nav is="cs-nav-pagination" page="{{search_page}}" pages="[[search_pages]]"></nav>
    </div>
    <h2 class="cs-text-center" hidden$="[[!searching_loader]]">
      <cs-icon icon="spinner" spin></cs-icon>
    </h2>
    <cs-table center list with-header>
      <cs-table-row>
        <cs-table-cell>[[L.action]]</cs-table-cell>
        <cs-table-cell>&nbsp;</cs-table-cell>
        <template as="column" is="dom-repeat" items="[[columns]]">
          <cs-table-cell>[[column]]</cs-table-cell>
        </template>
      </cs-table-row>
      <template as="user" is="dom-repeat" items="[[users]]">
        <cs-table-row class$="[[user.class]]" data-user-index$="[[index]]">
          <cs-table-cell>
            <template if="[[user.is_root]]" is="dom-if">-</template>
            <template if="[[!user.is_root]]" is="dom-if">
              <template if="[[!user.is_guest]]" is="dom-if">
                <a icon="pencil" is="cs-link-button" on-click="edit_user" tooltip="[[L.edit_user_information]]"></a>
              </template>
              <template if="[[!or(user.is_guest, user.is_bot)]]" is="dom-if">
                <a href="[[concat('/admin/System/users/users/groups/', user.id)]]" icon="group" is="cs-link-button" tooltip="[[L.edit_user_groups]]"></a>
              </template>
              <button icon="key" is="cs-button" on-click="edit_permissions" tooltip="[[L.edit_user_permissions]]"></button>
            </template>
          </cs-table-cell>
          <cs-table-cell>
            <span tooltip="[[user.type_info]]">
              <span>[[user.type]]</span>
              <cs-tooltip></cs-tooltip>
            </span>
          </cs-table-cell>
          <template as="column" is="dom-repeat" items="[[user.columns]]">
            <cs-table-cell>[[column]]</cs-table-cell>
          </template>
        </cs-table-row>
      </template>
    </cs-table>
    <div class="cs-margin cs-text-center" hidden$="[[!show_pagination]]">
      <nav is="cs-nav-pagination" page="{{search_page}}" pages="[[search_pages]]"></nav>
    </div>
    <p class="cs-text-left">
      <button is="cs-button" on-click="add_user" type="button">[[L.add_user]]</button>
      <button is="cs-button" on-click="add_bot" type="button">[[L.add_bot]]</button>
    </p>
  </template>
  <script src="script.js"></script>
</dom-module>
