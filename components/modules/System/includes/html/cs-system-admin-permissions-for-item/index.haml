%dom-module(id="cs-system-admin-permissions-for-item")
	%template
		%nav(is="cs-nav-tabs" selected="{{selected_tab}}")
			%button(is="cs-button") [[L.groups]]
			%button(is="cs-button") [[L.users]]
		%form#form
			%section(is="cs-section-switcher" selected="[[selected_tab]]")
				%div
					%p.cs-left
						%button(is="cs-button" on-click="invert" type="button") [[L.invert]]
						%button(is="cs-button" on-click="allow_all" type="button") [[L.allow_all]]
						%button(is="cs-button" on-click="deny_all" type="button") [[L.deny_all]]
					%cs-table(right-left)
						%h2.uk-text-center(hidden$="[[groups.length]]")
							.uk-icon-spin.uk-icon-spinner
						%template(is="dom-repeat" items="[[groups]]" as="group")
							%cs-table-row
								%cs-table-cell(data-uk-tooltip$="[[tooltip_animation]]" title$="[[group.description]]") [[group.title]]
								%cs-table-cell
									%span.uk-button-group(data-uk-button-radio)
										%label(class$="[[group_permission_class(group.id, '-1')]]")
											%input(type="radio" value="-1" checked$="[[group_permission_state(group.id, '-1')]]" name$="[[concat('groups[', group.id, ']')]]")/
											%span [[L.inherited]]
										%label(class$="[[group_permission_class(group.id, 0)]]")
											%input(type="radio" value="0" checked$="[[group_permission_state(group.id, 0)]]" name$="[[concat('groups[', group.id, ']')]]")/
											%span [[L.deny]]
										%label(class$="[[group_permission_class(group.id, 1)]]")
											%input(type="radio" value="1" checked$="[[group_permission_state(group.id, 1)]]" name$="[[concat('groups[', group.id, ']')]]")/
											%span [[L.allow]]
				%div
					%p.cs-left
						%button(is="cs-button" on-click="invert" type="button") [[L.invert]]
						%button(is="cs-button" on-click="allow_all" type="button") [[L.allow_all]]
						%button(is="cs-button" on-click="deny_all" type="button") [[L.deny_all]]
					%cs-table#users(right-left)
						%template(is="dom-repeat" items="[[users]]" as="user")
							-# Users list, duplicated below
							%cs-table-row
								%cs-table-cell(data-uk-tooltip$="[[tooltip_animation]]" title$="[[user.email]]") [[username(user)]]
								%cs-table-cell
									%span.uk-button-group(data-uk-button-radio)
										%label(class$="[[user_permission_class(user.id, '-1')]]")
											%input(type="radio" value="-1" checked$="[[user_permission_state(user.id, '-1')]]" name$="[[concat('users[', user.id, ']')]]")/
											%span [[L.inherited]]
										%label(class$="[[user_permission_class(user.id, 0)]]")
											%input(type="radio" value="0" checked$="[[user_permission_state(user.id, 0)]]" name$="[[concat('users[', user.id, ']')]]")/
											%span [[L.deny]]
										%label(class$="[[user_permission_class(user.id, 1)]]")
											%input(type="radio" value="1" checked$="[[user_permission_state(user.id, 1)]]" name$="[[concat('users[', user.id, ']')]]")/
											%span [[L.allow]]
					%input#search(is="cs-input" autocomplete="off" placeholder="[[L.type_username_or_email_press_enter]]" type="search")/
					%cs-table#search-results(right-left)
						%template(is="dom-repeat" items="[[found_users]]" as="user")
							-# Users list, duplicated above
							%cs-table-row
								%cs-table-cell(data-uk-tooltip$="[[tooltip_animation]]" title$="[[user.email]]") [[username(user)]]
								%cs-table-cell
									%span.uk-button-group(data-uk-button-radio)
										%label(class$="[[user_permission_class(user.id, '-1')]]")
											%input(type="radio" value="-1" checked$="[[user_permission_state(user.id, '-1')]]" name$="[[concat('users[', user.id, ']')]]")/
											%span [[L.inherited]]
										%label(class$="[[user_permission_class(user.id, 0)]]")
											%input(type="radio" value="0" checked$="[[user_permission_state(user.id, 0)]]" name$="[[concat('users[', user.id, ']')]]")/
											%span [[L.deny]]
										%label(class$="[[user_permission_class(user.id, 1)]]")
											%input(type="radio" value="1" checked$="[[user_permission_state(user.id, 1)]]" name$="[[concat('users[', user.id, ']')]]")/
											%span [[L.allow]]
		%button(is="cs-button" on-click="save" type="button") [[L.save]]
	%script(src="script.js")
