// Generated by CoffeeScript 1.9.3

/**
 * @package   CleverStyle Widgets
 * @author    Nazar Mokrynskyi <nazar@mokrynskyi.com>
 * @copyright Copyright (c) 2015, Nazar Mokrynskyi
 * @license   MIT License, see license.txt
 */

(function() {
  Polymer({
    'is': 'cs-select',
    'extends': 'select',
    behaviors: [Polymer.cs.behaviors.value, Polymer.cs.behaviors.tight, Polymer.cs.behaviors.size],
    properties: {
      initialized: Boolean
    },
    ready: function() {
      var scroll_once;
      scroll_once = (function(_this) {
        return function() {
          _this._scroll_to_selected();
          return document.removeEventListener('WebComponentsReady', scroll_once);
        };
      })(this);
      return document.addEventListener('WebComponentsReady', scroll_once);
    },
    _scroll_to_selected: function() {
      if (this.size > 1) {
        return this.scrollTop = this.selectedOptions[0].offsetHeight * (this.selectedIndex - Math.floor(this.size / 2)) + this._number_of_optgroups();
      }
    },
    _number_of_optgroups: function() {
      var count, optgroup;
      optgroup = this.selectedOptions[0].parentNode;
      count = 0;
      if (optgroup.tagName === 'OPTGROUP') {
        while (optgroup) {
          ++count;
          optgroup = optgroup.previousElementSibling;
        }
      }
      return count;
    }
  });

}).call(this);
