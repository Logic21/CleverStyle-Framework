// Generated by CoffeeScript 1.9.3

/**
 * @package   CleverStyle Widgets
 * @author    Nazar Mokrynskyi <nazar@mokrynskyi.com>
 * @copyright Copyright (c) 2015, Nazar Mokrynskyi
 * @license   MIT License, see license.txt
 */

(function() {
  Polymer({
    'is': 'cs-progress',
    'extends': 'progress',
    behaviors: [Polymer.cs.behaviors.tight],
    properties: {
      infinite: Boolean,
      textProgress: Boolean
    },
    created: function() {
      if (!this.getAttribute('max')) {
        this.max = 100;
      }
      if (this.value) {
        return this.attributeChanged('value', this.value);
      }
    },
    attached: function() {
      var update_progress;
      if (this.infinite) {
        update_progress = (function(_this) {
          return function() {
            if (!_this.parentNode) {
              return;
            }
            _this.value = (_this.value + 9) % 100;
            return setTimeout(update_progress, 200);
          };
        })(this);
        return update_progress();
      }
    },
    attributeChanged: function(name) {
      if (name === 'value' && this.textProgress) {
        return this.setAttribute('text', this[name] + '%');
      }
    }
  });

}).call(this);
