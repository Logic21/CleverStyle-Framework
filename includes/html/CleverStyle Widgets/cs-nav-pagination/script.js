// Generated by CoffeeScript 1.9.3

/**
 * @package   CleverStyle Widgets
 * @author    Nazar Mokrynskyi <nazar@mokrynskyi.com>
 * @copyright Copyright (c) 2015, Nazar Mokrynskyi
 * @license   MIT License, see license.txt
 */

(function() {
  Polymer({
    'is': 'cs-nav-pagination',
    'extends': 'nav',
    properties: {
      page: {
        notify: true,
        reflectToAttribute: true,
        type: Number
      },
      pages: {
        reflectToAttribute: true,
        type: Number
      },
      pages_list: Array
    },
    behaviors: [Polymer.cs.behaviors["this"], Polymer.cs.behaviors.tooltip],
    observers: ['refresh(page, pages)'],
    refresh: function(page, pages) {
      var i, j, k, l, m, n, o, p, pages_list, q, ref, ref1, ref2, ref3, ref4, ref5, ref6, ref7, ref8, render_one;
      if (!page || !pages) {
        return;
      }
      pages_list = [];
      render_one = this._render_one.bind(this, pages_list, page);
      if (pages <= 11) {
        for (i = j = 1, ref = pages; 1 <= ref ? j <= ref : j >= ref; i = 1 <= ref ? ++j : --j) {
          render_one(i);
        }
      } else if (page <= 6) {
        for (i = k = 1; k <= 7; i = ++k) {
          render_one(i);
        }
        render_one(0, '...');
        for (i = l = ref1 = pages - 2, ref2 = pages; ref1 <= ref2 ? l <= ref2 : l >= ref2; i = ref1 <= ref2 ? ++l : --l) {
          render_one(i);
        }
      } else if (page >= pages - 5) {
        for (i = m = 1; m <= 3; i = ++m) {
          render_one(i);
        }
        render_one(0, '...');
        for (i = n = ref3 = pages - 6, ref4 = pages; ref3 <= ref4 ? n <= ref4 : n >= ref4; i = ref3 <= ref4 ? ++n : --n) {
          render_one(i);
        }
      } else {
        for (i = o = 1; o <= 2; i = ++o) {
          render_one(i);
        }
        render_one(0, '...');
        for (i = p = ref5 = page - 2, ref6 = page + 2; ref5 <= ref6 ? p <= ref6 : p >= ref6; i = ref5 <= ref6 ? ++p : --p) {
          render_one(i);
        }
        render_one(0, '...');
        for (i = q = ref7 = pages - 1, ref8 = pages; ref7 <= ref8 ? q <= ref8 : q >= ref8; i = ref7 <= ref8 ? ++q : --q) {
          render_one(i);
        }
      }
      pages_list[0].first = true;
      pages_list[pages_list.length - 1].last = true;
      this.set('pages_list', pages_list);
    },
    _render_one: function(pages_list, page, i, text) {
      return pages_list.push({
        text: text || i,
        active: i === page,
        disabled: !i
      });
    },
    set_page: function(e) {
      return this.page = e.model.item.text;
    }
  });

}).call(this);
