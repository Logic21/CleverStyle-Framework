// Generated by CoffeeScript 1.9.3

/**
 * @package		CleverStyle CMS
 * @author		Nazar Mokrynskyi <nazar@mokrynskyi.com>
 * @copyright	Copyright (c) 2014-2015, Nazar Mokrynskyi
 * @license		MIT License, see license.txt
 */

(function() {
  (function($) {

    /*
    	  * Fix for jQuery "ready" event, trigger it after "WebComponentsReady" event triggered by WebComponents.js
     */
    (function() {
      var functions, ready, ready_callback, ready_original;
      ready_original = $.fn.ready;
      functions = [];
      ready = false;
      $.fn.ready = function(fn) {
        functions.push(fn);
      };
      ready_callback = function() {
        if (!ready) {
          document.removeEventListener('WebComponentsReady', ready_callback);
          Polymer.updateStyles();
          ready = true;
          $.fn.ready = ready_original;
          $(function() {
            var fn, i, len;
            for (i = 0, len = functions.length; i < len; i++) {
              fn = functions[i];
              fn();
            }
            functions = [];
          });
        }
      };
      document.addEventListener('WebComponentsReady', ready_callback);
    })();
    return $(function() {
      var registerOuterClick__original;
      registerOuterClick__original = UIkit.components.dropdown.prototype.registerOuterClick;
      UIkit.components.dropdown.prototype.registerOuterClick = function() {
        if (!WebComponents.flags.shadow && this.element[0].matches(':host *')) {
          $(this.element[0]).find('li').one('click', function(e) {
            UIkit.$html.trigger("click.outer.dropdown", e);
          });
        }
        registerOuterClick__original.call(this);
      };
    });
  })(jQuery);

}).call(this);
